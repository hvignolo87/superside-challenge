version: 2

models:
  - name: int_engagement_metrics
    description: ""
    tests:
      - dbt_expectations.expect_table_columns_to_contain_set:
          column_list: ["project_id", "engagement_id"]
      - dbt_expectations.expect_compound_columns_to_be_unique:
          column_list: ["project_id", "engagement_id"]
    columns:
      - name: project_id
        data_type: uuid
        description: ""
        tests:
          - not_null
      - name: engagement_id
        data_type: uuid
        description: ""
        tests:
          - not_null
      - name: customer_id
        data_type: integer
        description: ""
      - name: comments
        data_type: character varying
        description: ""
      - name: project_ref
        data_type: uuid
        description: ""
      - name: engagement_reference
        data_type: character varying
        description: ""
      - name: customer_name
        data_type: text
        description: ""
      - name: engagement_date
        data_type: date
        description: ""
      - name: employee_count
        data_type: integer
        description: ""
      - name: revenue
        data_type: numeric
        description: ""
      - name: revenue_usd
        data_type: numeric
        description: ""
      - name: client_revenue
        data_type: numeric
        description: ""
      - name: service
        data_type: text
        description: ""
        tests:
          - dbt_expectations.expect_column_values_to_be_in_set:
              value_set: var('service_categories')
              row_condition: "service IS NOT NULL"
      - name: sub_service
        data_type: character varying
        description: ""
        tests:
          - dbt_expectations.expect_column_values_to_be_in_set:
              value_set: var('sub_service_categories')
              row_condition: "sub_service IS NOT NULL"
      - name: engagement_type
        data_type: character varying
        description: ""
        tests:
          - dbt_expectations.expect_column_values_to_be_in_set:
              value_set: var('engagement_type_categories')
              row_condition: "engagement_type IS NOT NULL"
      - name: service_type
        data_type: character varying
        description: ""
        tests:
          - dbt_expectations.expect_column_values_to_be_in_set:
              value_set: var('service_categories')
              row_condition: "service_type IS NOT NULL"
      - name: detailed_sub_service
        data_type: character varying
        description: ""
        tests:
          - dbt_expectations.expect_column_values_to_be_in_set:
              value_set: var('sub_service_categories')
              row_condition: "detailed_sub_service IS NOT NULL"
